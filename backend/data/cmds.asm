call main 
hlt

; let the chaos begin

; function 
main:
; ---------------------------------------------
push 10
; ---------------------------------------------
; popping variable bebra
pop [rax + 0]
; ---------------------------------------------
push 5
; ---------------------------------------------
; popping variable bebra
pop [rax + 0]
; ---------------------------------------------
; pushing function call param: bebra
push [rax + 0]
; ---------------------------------------------
; switching namespace
push 1
push rax
add
; calling func
call fak
; switching namespace
push 1
push rax
sub
; ---------------------------------------------
push 5
; ---------------------------------------------
; popping variable sosiska
pop [rax + 1]
; ---------------------------------------------
ret
; end of func

; ---------------------------------------------
; ---------------------------------------------
; ---------------------------------------------
; ---------------------------------------------
; ---------------------------------------------
; ---------------------------------------------
; ---------------------------------------------
; function 
; poping function argument: schet
push [rax + 0]
; ---------------------------------------------
fak:
; ---------------------------------------------
push 1
; ---------------------------------------------
; pushing variable schet
push [rax + 0]
; ---------------------------------------------
sub
; ---------------------------------------------
; popping variable schet
pop [rax + 0]
; ---------------------------------------------
push 1
; ---------------------------------------------
; popping variable suchka
pop [rax + 1]
; ---------------------------------------------
push 1
; ---------------------------------------------
; popping variable iaseksi
pop [rax + 2]
; ---------------------------------------------
ret
; end of func

; ---------------------------------------------
; ---------------------------------------------
; ---------------------------------------------
; ---------------------------------------------
; ---------------------------------------------
; ---------------------------------------------
; ---------------------------------------------
; ---------------------------------------------
